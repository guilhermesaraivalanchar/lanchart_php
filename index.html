
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon.png">
    <title>Totem</title>
    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-grid.min.css" rel="stylesheet">
    <link href="css/bootstrap-reboot.min.css" rel="stylesheet">
    <link href="css/prism.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/style.css" rel="stylesheet">s
    <!-- You can change the theme colors from here -->
    <link href="css/blue.css" id="theme" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</head>

<body style="background-image:url(imagens/fundo.jpg); border: solid; border-width: 1px; border-color: #fc8311; overflow: hidden">

  <!-- ============================================================== -->
  <!-- Preloader - style you can find in spinners.css -->
  <!-- ============================================================== -->
  <div class="preloader">
    <svg class="circular" viewBox="25 25 50 50">
     123 <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" /> </svg>
  </div>
  <!-- ============================================================== -->
  <!-- Main wrapper - style you can find in pages.scss -->
  <!-- ============================================================== -->
  <section id="wrapper">
    <div id="card_login" class="login-register" style="display: none;">
      <div class="login-box card">
        <div class="card-body">
          <form class="form-horizontal form-material" id="loginform" action="">
            <h3 class="box-title m-b-20">Entrar</h3>
            <div class="form-group ">
              <div class="col-xs-12">
                <input class="form-control" type="text" required="true" id="user_codigo" placeholder="Username"> 
              </div>
            </div>
            <div class="form-group">
              <div class="col-xs-12">
                <input class="form-control" type="password" required="true" id="user_pass" placeholder="Password"> 
              </div>
            </div>

            <div class="form-group text-center m-t-20">
              <div class="col-xs-12">
                <button class="btn btn-info btn-lg btn-block text-uppercase waves-effect waves-light" id="log_in" type="button">Log In</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
  <div style="width: 100%; height: 480px; overflow-y: scroll;">
    <div id="card_produtos" class="card" style="display: block; max-height: 480px;overflow-y: scroll;">
      <!-- Nav tabs -->
      <ul class="nav nav-tabs profile-tab" role="tablist" style="position: fixed; top: 5px; background-color: white">
          <li class="nav-item"> <a class="nav-link active" data-toggle="tab" href="#home" role="tab">Activity</a>
          </li>
          <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#profile" role="tab">Profile</a>
          </li>
          <li class="nav-item"> <a class="nav-link" data-toggle="tab" href="#settings" role="tab">Settings</a>
          </li>
      </ul>
      <!-- Tab panes -->
      <div class="tab-content" style="max-height: 480px; overflow-y: scroll;background-image:url(imagens/fundo.jpg);">
          <div class="tab-pane active row" id="home" role="tabpanel" style="margin-top: 60px;">
            
            <table>
              <tr>
                <td width="213px">
                    <div class="card">
                        <div class="el-card-item">
                            <div class="el-card-avatar el-overlay-1"> <img src="imagens/img1.jpg" alt="user" style="width: 213px;" />
                            </div>
                            <div class="el-card-content">
                              <h3 class="box-title">Preeeoject title</h3> <small>subtitle of project</small>
                              <br/>
                            </div>

                        </div>
                    </div>
                </td>
                <td width="213px">
                      <div class="card">
                        <div class="el-card-item">
                            <div class="el-card-avatar el-overlay-1"> <img src="imagens/img1.jpg" alt="user" style="width: 213px;" />
                            </div>
                            <div class="el-card-content">
                              <h3 class="box-title">Preeeoject title</h3> <small>subtitle of project</small>
                              <br/>
                            </div>

                        </div>
                    </div>
                </td>
                <td width="213px">
                      <div class="card">
                        <div class="el-card-item">
                            <div class="el-card-avatar el-overlay-1"> <img src="imagens/img1.jpg" alt="user" style="width: 213px;" />
                            </div>
                            <div class="el-card-content">
                              <h3 class="box-title">Preeeoject title</h3> <small>subtitle of project</small>
                              <br/>
                            </div>

                        </div>
                    </div>
                </td>
              </tr>
              <tr>
                <td width="213px">
                    <div class="card">
                        <div class="el-card-item">
                            <div class="el-card-avatar el-overlay-1"> <img src="imagens/img1.jpg" alt="user" style="width: 213px;" />
                            </div>
                            <div class="el-card-content">
                              <h3 class="box-title">Preeeoject title</h3> <small>subtitle of project</small>
                              <br/>
                            </div>

                        </div>
                    </div>
                </td>
                <td width="213px">
                      <div class="card">
                        <div class="el-card-item">
                            <div class="el-card-avatar el-overlay-1"> <img src="imagens/img1.jpg" alt="user" style="width: 213px;" />
                            </div>
                            <div class="el-card-content">
                              <h3 class="box-title">Preeeoject title</h3> <small>subtitle of project</small>
                              <br/>
                            </div>

                        </div>
                    </div>
                </td>
                <td width="213px">
                      <div class="card">
                        <div class="el-card-item">
                            <div class="el-card-avatar el-overlay-1"> <img src="imagens/img1.jpg" alt="user" style="width: 213px;" />
                            </div>
                            <div class="el-card-content">
                              <h3 class="box-title">Preeeoject title</h3> <small>subtitle of project</small>
                              <br/>
                            </div>

                        </div>
                    </div>
                </td>
              </tr>
            </table>  

          </div>
          <!--second tab-->
          <div class="tab-pane" id="profile" role="tabpanel">
              
          </div>
          <div class="tab-pane" id="settings" role="tabpanel">
              
          </div>
      </div>
    </div>
  </div>
  <!-- ============================================================== -->
  <!-- End Wrapper -->
  <!-- ============================================================== -->
  <!-- ===================================  =========================== -->
  <!-- All Jquery -->
  <!-- ============================================================== -->
  <script src="js/jquery.min.js"></script>
  <!-- Bootstrap tether Core JavaScript -->
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <!-- slimscrollbar scrollbar JavaScript -->
  <script src="js/jquery.slimscroll.js"></script>
  <!--Wave Effects -->
  <script src="js/waves.js"></script>
  <!--Menu sidebar -->
  <script src="js/sidebarmenu.js"></script>
  <!--stickey kit -->
  <script src="js/sticky-kit.min.js"></script>
  <script src="js/jquery.sparkline.min.js"></script>
  <!--Custom JavaScript -->
  <script src="js/custom.min.js"></script>
  <!-- ============================================================== -->
  <!-- Style switcher -->
  <!-- ============================================================== -->
  <script src="js/jQuery.style.switcher.js"></script>
  

  <script type="text/javascript">

    var totem_token = "HD25512FVJEJHZX2558VGBKJE45"
    var e_id = 1
    var server = "http://localhost:3000"
    $.getJSON(server+"/totem/g_p", { e: e_id, t: totem_token },function(d) {
      console.log(d)
    })

    $("#log_in").click(function(){

      $.post(server+"/totem/login",
      {
        c: $("#user_codigo").val(),
        p: $("#user_pass").val(),
        e: e_id,
        t: totem_token
      },
      function(data, status){
        console.log(data)
        console.log(status)

        if (data.status == "200"){
          prod_init(data.p, data.c)
          $("#card_login").hide()
          $("#card_produtos").show()
        }


      });




    })


    function prod_init(produtos_all_string, combos_all_string){

      produtos_all = []
      produtos_all_preco = []
      produtos_all_quantidade = []

      produtos = []

      prod_card = produtos_all_string.split("...")

      for(i in prod_card){
        prod_dados = prod_card[i].split("::")
        produtos_all[prod_dados[1]] = prod_dados[0]
        produtos_all_preco[prod_dados[1]] = parseFloat(prod_dados[2])
        produtos_all_quantidade[prod_dados[1]] = parseFloat(prod_dados[3])
        if (prod_dados[1] != undefined){
          produtos.push({id: prod_dados[1], nome: prod_dados[0], preco: parseFloat(prod_dados[2]), quantidade: parseFloat(prod_dados[3])})
        }
      }

      combos_all = []
      combos_all_preco = []

      combos = []

      comb_card = combos_all_string.split("...")

      for(i in comb_card){
        comb_dados = comb_card[i].split("::")
        combos_all[comb_dados[1]] = comb_dados[0]
        combos_all_preco[comb_dados[1]] = parseFloat(comb_dados[2])
        if (comb_dados[1] != undefined){
          combos.push({id: comb_dados[1], nome: comb_dados[0], preco: parseFloat(comb_dados[2])})
        }
      }

      console.log(produtos)
      console.log(combos)


    }

    function replaceAll(str, find, replace) {
      return str.replace(new RegExp(find, 'g'), replace);
    }

  </script>
</body>

</html> 